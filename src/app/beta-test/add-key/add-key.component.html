<div class="signin-main">
  <form [formGroup]="keyUploadForm">
    <div class="form-field-container">
      <h2>Add Keys</h2>
      <p>Enter the keys you want to upload</p>
    </div>

    <div class="form-field-container">
      <label for="key">Key Code</label>
      <input
        id="key"
        matInput
        placeholder="Enter key code"
        [(ngModel)]="newKey"
        [ngModelOptions]="{ standalone: true }"
        (keyup.enter)="addKey()"
        autocomplete="off"
      />
    </div>

    <div class="form-field-container">
      <div class="button">
        <button
          class="buttonSecondary"
          mat-raised-button
          type="button"
          (click)="addKey()"
        >
          Add Key
        </button>
        <button
          class="buttonSecondary"
          mat-raised-button
          type="button"
          (click)="cancelOnClick()"
        >
          Cancel
        </button>
      </div>
    </div>

    @if (keys.length > 0) {
    <div class="form-field-container">
      <h3>Added Keys:</h3>
      <div class="keys-list">
        <div class="key-item" *ngFor="let key of keys; let i = index">
          <span>{{ key.code }}</span>
          <button
            mat-icon-button
            color="warn"
            type="button"
            (click)="removeKey(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    } @if (keys.length > 0) {
    <mat-divider></mat-divider>

    <div class="form-field-container">
      <button
        class="buttonSignIn"
        mat-raised-button
        (click)="uploadKeys()"
        [disabled]="keys.length === 0 || isLoading"
      >
        {{ isLoading ? "Uploading..." : "Upload Keys" }}
      </button>
    </div>
    }
  </form>
</div>
